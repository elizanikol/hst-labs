# hst-sequential

## Бизнес логика:
Сформировать M результирующих векторов как квадрат максимального значения по каждой строке M исходных квадратных матриц.

## Вариант исполнения:
Реализация через OpenMP.

## Особенности исполнения:
Считывание данных происходит из бинарного файла;
Данные генерируются утилитой, принимающей в качестве параметров размер данных для обработки в мегабайтах и имя файла;
Программа выполняет бизнес-логику и записывает результат в выходной файл;
В конце файла с результатами сохраняется информация о времени выполнения вычислений и размере обработанных данных.

## Описание алгоритма выполнения бизнес-логики:
1. Для генерации исходных данных используется функция ```GenerateMatricesAndSaveThemToFile()```. 
С помощью ```std::default_random_engine``` определяется количество строк очередной квадратной матрицы, которая затем заполняется произвольными значениями типа double в диапазоне [0, 10] и записывается в бинарный файл ```InputDataFile```. 
Генерация матриц заканчивается после того, как размер файла с данными превысит размер, введенный пользователем.

2. После этого запускается программа-клиент, считывающая сгенерированные матрицы из ```InputDataFile```. В функции ```CalculateMaxElementsSquare()``` над исходными данными выполняются вычисления: для каждой строки i-ой матрицы с помощью функции MaxElement() вычисляется максимальное значение, которое возводится в квадрат и записывается в результирующий i-ый вектор.
3. С помощью ```std::chrono::steady_clock``` определяется время выполнения вычислений, которое записывается в бинарный файл ```ResultsFile``` вместе с результатами вычислений.

## Описание логики распараллеливания:
Для распараллеливания программы используется директива ```#pragma omp parallel for``` внутри функции ```CalculateMaxElementsSquare()```, в результате чего вычисления в цикле ```for```, выполняемые над вектором матриц, распределяются между выделяемыми потоками.
Распределение групп матриц по потокам осуществляется средствами OpenMP. 
Количество потоков задается с помощью ```num_threads(ThreadsNumber)```. 
На данном участке программы распараллеливание целесообразно, поскольку каждый поток может выполнять свою задачу независимо от других: для каждой i-ой матрицы из выделенной группы проводятся вычисления, результат которых записывается в i-ый вектор массива maxSquaresVectors.

## График зависимости времени вычислений от размера исходных данных:
Результаты приведены для 4 потоков.
![Снимок экрана 2022-10-15 035228](https://user-images.githubusercontent.com/55412039/195977323-a9161ea1-3be4-416d-bf58-044a74bdf3c6.png)

